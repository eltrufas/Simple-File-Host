"use strict";var form=document.forms.namedItem("uploadform"),input=document.getElementById("filefield"),token=document.getElementById("tokenfield"),label=input.nextElementSibling;input.addEventListener("change",function(e){if(!input.files.length)return void(label.innerHTML="No file specified");if(!token.value.length)return void(label.innerHTML="No token specified");label.innerHTML="Uploading...";var n=new XMLHttpRequest;n.responseType="json",n.upload.addEventListener("progress",function(e){label.innerHTML="Uploading... "+Math.round(100*e.loaded/e.total)}),n.addEventListener("load",function(e){if(console.log("huh"),console.log(n),200==n.status){var l=n.response;result.style.display="block",label.innerHTML="Uploaded!",console.log('<b>Url:</b> <a href="'+l.url+">"+l.url+"</a>"),result.innerHTML='<b>Url:</b> <a href="'+l.url+'">'+l.url+"</a>"}else console.log("pls"),label.innerHTML="Error uploading!"}),n.addEventListener("error",function(e){label.innerHTML="Error uploading!"}),n.open("post",".?token="+token.value,!0),n.send(new FormData(form)),e.preventDefault()});var result=document.getElementById("result");result.style.display="none";